<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chat Grupal</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>

  <!-- Tela 1: Entrada -->
  <div id="server-screen" class="screen">
    <div class="welcome-box">
      <div class="logo">ğŸ’¬</div>
      <h1>Chat Grupal</h1>
      <p class="subtitle">Converse com seus amigos de forma privada e segura</p>
      <button class="btn-start">
        <span class="btn-icon">ğŸš€</span>
        <span>ComeÃ§ar a Conversar</span>
      </button>
      <div class="features">
        <div class="feature">
          <span>âœ…</span>
          <span>Nomes protegidos por dispositivo</span>
        </div>
        <div class="feature">
          <span>ğŸ”’</span>
          <span>SeguranÃ§a mÃ¡xima</span>
        </div>
        <div class="feature">
          <span>ğŸ‘¥</span>
          <span>Converse com vÃ¡rias pessoas</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Tela 2: OpÃ§Ãµes -->
  <div id="auth-options" class="screen" style="display:none;">
    <div class="options-box">
      <h2>O que vocÃª quer fazer?</h2>
      <div class="options">
        <button class="option create" onclick="showCreateForm()">
          <div class="option-icon">ğŸ†•</div>
          <div class="option-text">
            <div class="option-title">Criar Grupo</div>
            <div class="option-desc">Crie um novo chat</div>
          </div>
          <div class="option-arrow">â†’</div>
        </button>
        
        <button class="option join" onclick="showJoinForm()">
          <div class="option-icon">ğŸ‘¥</div>
          <div class="option-text">
            <div class="option-title">Entrar em Grupo</div>
            <div class="option-desc">Entre em um chat existente</div>
          </div>
          <div class="option-arrow">â†’</div>
        </button>
        
        <button class="option recover" onclick="showRecoveryForm()">
          <div class="option-icon">ğŸ”‘</div>
          <div class="option-text">
            <div class="option-title">Recuperar Acesso</div>
            <div class="option-desc">Volte ao seu grupo</div>
          </div>
          <div class="option-arrow">â†’</div>
        </button>
      </div>
      
      <!-- BOTÃƒO VOLTAR FUNCIONANDO -->
      <button class="btn-back" onclick="backToMain()">
        <span>â†</span>
        <span>Voltar para InÃ­cio</span>
      </button>
      
      <div id="auth-error" class="error-msg"></div>
    </div>
  </div>

  <!-- Tela 3: Criar Grupo -->
  <div id="create-form" class="screen" style="display:none;">
    <div class="form-box">
      <h2><span class="form-icon">ğŸ†•</span> Criar Novo Grupo</h2>
      
      <div class="input-group">
        <label>Nome do Grupo</label>
        <input type="text" id="create-grupo" placeholder="Ex: amigos, trabalho" maxlength="10">
        <div class="hint">MÃ¡x. 10 caracteres (letras, nÃºmeros, - e _)</div>
      </div>
      
      <div class="input-group">
        <label>Seu Nome</label>
        <input type="text" id="create-nome" placeholder="Como vocÃª serÃ¡ chamado" maxlength="15">
        <div class="hint">MÃ¡x. 15 caracteres</div>
      </div>
      
      <div class="input-group">
        <label>Senha (opcional)</label>
        <input type="password" id="create-password" placeholder="Proteja seu grupo">
        <div class="hint">Deixe em branco para grupo pÃºblico</div>
      </div>
      
      <div class="checkbox-group">
        <input type="checkbox" id="create-private">
        <label for="create-private">
          <div class="checkbox"></div>
          <span>ğŸ›¡ï¸ Tornar grupo privado</span>
        </label>
        <div class="hint">Grupos privados exigem senha para entrar</div>
      </div>
      
      <div class="form-buttons">
        <button class="btn-primary" onclick="createGroup()">
          <span class="btn-action-icon">âœ¨</span>
          Criar Grupo
        </button>
        
        <!-- BOTÃƒO VOLTAR FUNCIONANDO -->
        <button class="btn-secondary" onclick="backToAuth()">
          <span class="btn-action-icon">â†©ï¸</span>
          Voltar para OpÃ§Ãµes
        </button>
      </div>
    </div>
  </div>

  <!-- Tela 4: Entrar em Grupo -->
  <div id="join-form" class="screen" style="display:none;">
    <div class="form-box">
      <h2><span class="form-icon">ğŸ‘¥</span> Entrar em Grupo</h2>
      
      <div class="input-group">
        <label>Nome do Grupo</label>
        <input type="text" id="join-grupo" placeholder="Digite o ID do grupo">
      </div>
      
      <div class="input-group">
        <label>Seu Nome</label>
        <input type="text" id="join-nome" placeholder="Seu nome no chat">
      </div>
      
      <div class="input-group">
        <label>Senha do Grupo</label>
        <input type="password" id="join-password" placeholder="Se for privado">
        <div class="hint" id="password-hint">Deixe em branco se for pÃºblico</div>
      </div>
      
      <div class="form-buttons">
        <button class="btn-primary" onclick="joinGroup()">
          <span class="btn-action-icon">ğŸš€</span>
          Entrar no Grupo
        </button>
        
        <!-- BOTÃƒO VOLTAR FUNCIONANDO -->
        <button class="btn-secondary" onclick="backToAuth()">
          <span class="btn-action-icon">â†©ï¸</span>
          Voltar para OpÃ§Ãµes
        </button>
      </div>
    </div>
  </div>

  <!-- Tela 5: RecuperaÃ§Ã£o -->
  <div id="recovery-form" class="screen" style="display:none;">
    <div class="form-box">
      <h2><span class="form-icon">ğŸ”‘</span> Recuperar Acesso</h2>
      
      <p class="info-text">Solicite um token para voltar ao seu grupo</p>
      
      <div class="input-group">
        <label>Nome do Grupo</label>
        <input type="text" id="recover-grupo" placeholder="Grupo que vocÃª participa">
      </div>
      
      <div class="input-group">
        <label>Seu Nome no Grupo</label>
        <input type="text" id="recover-nome" placeholder="Como vocÃª se chamava">
      </div>
      
      <div class="form-buttons">
        <button class="btn-primary" onclick="requestRecovery()">
          <span class="btn-action-icon">ğŸ“¨</span>
          Solicitar Token
        </button>
        
        <!-- BOTÃƒO VOLTAR FUNCIONANDO -->
        <button class="btn-secondary" onclick="backToAuth()">
          <span class="btn-action-icon">â†©ï¸</span>
          Voltar para OpÃ§Ãµes
        </button>
      </div>
      
      <!-- Token Section -->
      <div id="token-section" style="display:none; margin-top: 20px;">
        <div class="input-group">
          <label>Token de VerificaÃ§Ã£o</label>
          <input type="text" id="recover-token" placeholder="Digite o token recebido" maxlength="6">
          <div class="hint">Token de 6 dÃ­gitos (expira em 5 minutos)</div>
        </div>
        
        <button class="btn-primary" onclick="verifyRecovery()">
          <span class="btn-action-icon">âœ…</span>
          Verificar Token
        </button>
      </div>
      
      <div id="recovery-result" class="result-box"></div>
    </div>
  </div>

  <!-- TELA DO CHAT -->
  <div id="chat-container" class="screen" style="display:none;">
    <!-- CabeÃ§alho do Chat -->
    <div class="chat-header">
      <div class="chat-header-left">
        <div class="chat-group-info">
          <div class="chat-group-name" id="header-grupo">Grupo</div>
          <div class="chat-user-count" id="header-count">â— 0 online</div>
        </div>
      </div>
      
      <div class="chat-header-right">
        <div class="chat-user-name" id="header-user">VocÃª</div>
        <button class="btn-leave" onclick="leaveGroup()">
          <span class="leave-icon">ğŸšª</span>
          Sair
        </button>
      </div>
    </div>

    <!-- Ãrea de Mensagens -->
    <div class="chat-messages" id="chat-messages">
      <!-- Mensagens aparecem aqui -->
    </div>

    <!-- Ãrea de Input -->
    <div class="chat-input-area">
      <div class="input-wrapper">
        <input type="text" 
               id="message-input" 
               placeholder="Digite sua mensagem..." 
               maxlength="500">
        <button class="btn-send" onclick="sendMessage()">
          <span class="send-icon">â¤</span>
        </button>
      </div>
    </div>
  </div>

  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script src="/static/script.js"></script>
</body>
</html>
